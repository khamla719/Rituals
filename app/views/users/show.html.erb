<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->


<% if session[:id] && session[:id] == @user.id %>
  <%= link_to 'New Memory', new_user_memory_path(@user) %>
<% end %>

<% if session[:id] == @user.id %>
<% else %>
<% @memories = @user.memories.where(private: false) %>
<% end %>

<div class="flipbook-viewport">
  <div class="container">
    <div class="flipbook">
      <div>
      <h1> <%=@user.first_name.capitalize  + "'s" + " memories"%></h1>
      </div>
 <% @memories.each do |memory| %>
      <div>
      <h1> Story </h1>
         <p><%= memory.story %></p>
      </div>
      <div>
      <h1> <%= memory.title.capitalize %></h1>
      <br>
      <% if memory.url %>
      Url: <img src="<%=memory.url%>" alt="image of story">
      <% end %>
      <br>
      Description: <p><%= memory.description %></p>
      <br>
        <td><%= link_to 'Edit', edit_user_memory_path(@user, memory) %></td>
        <td><%= link_to 'Destroy', user_memory_path(@user, memory), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </div>
      <% end %>


    </div>
  </div>
</div>


<script type="text/javascript">

function loadApp() {

  // Create the flipbook

  $('.flipbook').turn({
      // Width

      width:922,

      // Height

      height:600,

      // Elevation

      elevation: 50,

      // Enable gradients

      gradients: true,

      // Auto center this flipbook

      autoCenter: true

  });
}

// Load the HTML4 version if there's not CSS transform

yepnope({
  test : Modernizr.csstransforms,
  // yep: ['../../assets/javascripts/turn.js'],
  // nope: ['../../assets/javascripts/turn.html4.min.js'],
  // both: ['../../basic/css/basic.css'],
  complete: loadApp
});

</script>


